#version 330 core

uniform sampler2D textureUnit0;
uniform sampler2D textureUnit1;
uniform sampler2D textureUnit2;

in vec2 vOutTexCoord0;

void main()
{
	vec4 color = texture2D(textureUnit0, vOutTexCoord0);	
	vec4 position = texture2D(textureUnit1, vOutTexCoord0);	
	vec4 normal = texture2D(textureUnit2, vOutTexCoord0);	
	vec3 lightPos = vec3(10.0, 10.0, 10.0);
	vec3 dir = normalize(lightPos - position.xyz);
	float rate = max(dot(dir, normal.xyz), 0);
	gl_FragColor = color * rate;
}